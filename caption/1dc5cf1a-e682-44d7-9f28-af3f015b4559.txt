1
00:00:04,760 --> 00:00:08,270
For a long time.

2
00:00:12,120 --> 00:00:25,950
July number seven. Today, we're going to offer a handout 11, 12 and 13, which are Cox professional models and they are useful for homework five.

3
00:00:26,310 --> 00:00:34,620
So full disclosure for from from work for you don't need this Bob what we did last not last Bob on there love before.

4
00:00:34,620 --> 00:00:38,490
So five on six should be everything you need for this homework.

5
00:00:39,480 --> 00:00:45,210
This is for homework five which it'll be posted very, very soon in campus.

6
00:00:46,800 --> 00:00:53,170
Just a quick reminder, homework support is due November.

7
00:00:54,700 --> 00:00:59,860
Okay. So this is the outline for today's presentation.

8
00:01:00,580 --> 00:01:09,690
Feed us a description of Cook's professional models testing Vega Adjusted Cox Survivorship Survival Plots.

9
00:01:10,030 --> 00:01:20,140
I stress the five models models will be checked for the proportional cause our assumption and then I must x okay.

10
00:01:21,430 --> 00:01:27,070
So the data we're going to work on for part of the life is the following.

11
00:01:27,550 --> 00:01:37,420
We have 3470 newborns each of we followed them for one year to determine my risk

12
00:01:37,420 --> 00:01:41,770
factors associated with developing pneumonia within the first year of life.

13
00:01:42,220 --> 00:01:54,430
So our observed variable is these one change 18 years and then our Delta II is being like pneumonia here.

14
00:01:55,330 --> 00:02:03,160
And then another work on variable, those we're going to talk about is psychomotor age, and our categorical variable for poverty isn't so good.

15
00:02:04,990 --> 00:02:13,210
Okay, so the event here is what are the new babies develop pneumonia or not?

16
00:02:15,970 --> 00:02:25,810
Okay, so until now we know how like if you have X on daily, but this is my observed time unveiled on a lot of covariates.

17
00:02:25,810 --> 00:02:34,900
You can see the model and the survival. Right. And if we used a couple of measures estimates, then you'll see directly the survival function.

18
00:02:35,320 --> 00:02:38,550
However, with the couple of measures similar,

19
00:02:38,710 --> 00:02:44,410
we don't any model it's very hard to like find a value that is like changing according to the

20
00:02:44,410 --> 00:02:49,899
covariates because you are directly creating a model for each of these possible levels of all of these.

21
00:02:49,900 --> 00:02:53,410
Correct. So that's what the Cox proportional model is doing.

22
00:02:54,640 --> 00:03:04,180
So for example, if I run the following code, so in 2000 have struck proportional has a regression,

23
00:03:04,180 --> 00:03:11,350
which is like the Cox proportional model in this case and the data my dataset, the model structure is exactly the same.

24
00:03:11,650 --> 00:03:24,130
So I have model my observed time times, my delta here, and then I want to run it against one covariance here in this case is bigger than model h,

25
00:03:24,850 --> 00:03:30,940
I add, but is less risk limits to have the confidence interval for the hazard ratios.

26
00:03:31,360 --> 00:03:36,580
Then with this code I can not only see this survival of the different survivals plots,

27
00:03:36,940 --> 00:03:43,870
but more importantly because I'm using like the proportional has a regression and have a value of my time with that estimate,

28
00:03:43,870 --> 00:03:51,249
which in this case is beta. So for each of the variables that I have after the equal sign, I have one beta.

29
00:03:51,250 --> 00:03:54,490
In this case I only have one. So I have mother age.

30
00:03:54,850 --> 00:04:00,970
This is the estimate parameter. Then I can assess whether that viable is significant or not in the model.

31
00:04:01,360 --> 00:04:11,860
Meaning that significant in this case means that whether mother whether it's mother age increases or decreases,

32
00:04:11,860 --> 00:04:15,700
the hazard ratio baseline for the population does not make sense.

33
00:04:17,920 --> 00:04:21,580
Here is the estimate high system.

34
00:04:23,620 --> 00:04:32,350
There's a statistic that we value because if you are used as a 5%, we can agree that that viable should be included in the model.

35
00:04:33,610 --> 00:04:44,200
Just remember that it's equivalent to test whether these weight is equal to zero or whether we have shown the hazard ratio is equal to one,

36
00:04:44,350 --> 00:04:49,900
which is e to the power of this thing. Okay, so that's the world test.

37
00:04:52,330 --> 00:05:01,000
How do we do the world test in order to remember that anything related with survival are using this survival live verdict?

38
00:05:01,720 --> 00:05:06,910
We feed the Cox proportional model so insource.

39
00:05:06,910 --> 00:05:12,910
Remember that to fit the Cox proportional model we use proportional hazard h

40
00:05:12,970 --> 00:05:19,209
recreated regression in our we are going to use the Cox proportional course.

41
00:05:19,210 --> 00:05:24,070
Our function affects everything within the function looks fairly the same.

42
00:05:24,460 --> 00:05:34,960
So I have my survival here, which is a function but depends on the observed time and also on my delta I and then Tilde,

43
00:05:36,070 --> 00:05:39,940
because I'm including one provided in the model, in this case another age.

44
00:05:40,930 --> 00:05:52,030
Yes. And then I have my data set and then if I do, some of summary of that function is going to give me something that looks like this.

45
00:05:52,420 --> 00:05:57,730
So the first one is. Here are the coefficient de rock coefficient.

46
00:05:58,420 --> 00:06:01,490
And then here I also have the exponent of the coefficient.

47
00:06:01,510 --> 00:06:09,490
So for example here this is their real coefficient euro estimate of that data.

48
00:06:09,850 --> 00:06:14,170
And here I have the exponent of that theta hut.

49
00:06:14,470 --> 00:06:17,470
Okay. You have.

50
00:06:17,500 --> 00:06:20,739
If you are using their role coefficient in size. I'm sorry.

51
00:06:20,740 --> 00:06:25,000
In our you have the c a statistic and then the p value.

52
00:06:25,300 --> 00:06:30,550
But remember that these things are equivalent to the world test if you are.

53
00:06:31,450 --> 00:06:36,940
So for example, if you take this statistic, I'm u s squared.

54
00:06:37,390 --> 00:06:40,450
So -2.2082.

55
00:06:40,450 --> 00:06:47,170
The square is 4.8, which is the same value that we had in stars because in fact we are using world estimates.

56
00:06:47,500 --> 00:06:56,770
But you can use either you can conclude based on we see if the thing sticks on you square and compare based on what the statistic is exactly the same.

57
00:06:58,690 --> 00:07:05,140
Any questions so far? All right.

58
00:07:09,280 --> 00:07:16,860
So. Until now things looks at this sort of needs a little bit.

59
00:07:16,870 --> 00:07:24,230
We are to talk about survival in terms of parameters because I'm used to thinking about survival in terms of plot, right?

60
00:07:24,250 --> 00:07:28,420
Like I love the survival probability. So that's what we are going to do.

61
00:07:28,420 --> 00:07:32,080
Not like based on this model, we are going to try to plot the survival probabilities.

62
00:07:33,100 --> 00:07:42,940
Okay, so let's think of a model where I can I want to estimate the survival probability and I have to covariates the model age.

63
00:07:44,890 --> 00:07:50,620
And then poverty starts. So Mother Age is a continuous variable.

64
00:07:51,010 --> 00:07:55,060
And then poverty status is either one or two. It's a categorical variable.

65
00:07:56,120 --> 00:08:06,680
So what I would like to do, like my out, like my final output for this part is to be able to create a flood like this.

66
00:08:07,370 --> 00:08:10,760
So a flood of this survival probability here.

67
00:08:11,240 --> 00:08:20,840
And then I have two lines here. One for people in poverty, group one and one for people in the poverty group zero.

68
00:08:21,050 --> 00:08:27,380
Okay. However, if you look at our model, we have two variables.

69
00:08:27,500 --> 00:08:36,380
We have two variables. So poverty and Mother H. So I'm doing these for only people whose age I think is 22.

70
00:08:36,530 --> 00:08:40,220
Yeah. So I'm doing this plot.

71
00:08:40,550 --> 00:08:43,880
I want to create this blood only for people.

72
00:08:46,360 --> 00:08:52,300
Who's Mother Age is like 22 for like newborns with like Mother H equal to 22.

73
00:08:52,840 --> 00:08:59,770
So that means that I want to fix my first predictor to be 22 and then I want to create

74
00:08:59,800 --> 00:09:07,209
for all of that people to 19 my survivor who I'm 41 and then another for poverty.

75
00:09:07,210 --> 00:09:16,270
Zero So the first thing I want to do in sports is to create as many data set of what I want.

76
00:09:16,750 --> 00:09:26,350
So what I want is fixed model 1822 and then very forward thinking to zero, which is what I'm doing here.

77
00:09:26,350 --> 00:09:35,290
So I have six poverty out I'm sorry mother 18 to 22 and then I bury to the two possible levels off.

78
00:09:37,960 --> 00:09:48,070
Of poverty. And then I just run my models. So I use proportional regression, I use my data sets, my complete data set.

79
00:09:48,490 --> 00:09:51,910
I write my model in the same way I write the average before.

80
00:09:51,910 --> 00:10:00,130
So this is absurd time, false claim. So I include my covariance into them or else my include moderate to poverty.

81
00:10:00,550 --> 00:10:05,500
I use risk limits to obtain like the 95% confidence intervals.

82
00:10:05,950 --> 00:10:11,830
But then after that, what I'm going to do is here.

83
00:10:13,690 --> 00:10:16,900
So what I'm going to do is save a lot of the outputs.

84
00:10:18,010 --> 00:10:28,040
So. I'm saving out, which is like I would put on this thing in an object object that is called three ball.

85
00:10:28,670 --> 00:10:33,770
And then what I want to do is I want to estimate that survival probability,

86
00:10:33,770 --> 00:10:39,620
which is the output of the Cox regression model, but only for the datasets that I have here.

87
00:10:40,040 --> 00:10:44,930
So what I'm doing here, if you look at my command, my property, is what I created here.

88
00:10:45,320 --> 00:10:49,700
So this model, 18 to 22 and then one and two.

89
00:10:49,820 --> 00:10:55,040
So that's what I have here. So I'm going to feed my I'm going to I'm sorry,

90
00:10:55,040 --> 00:11:08,570
I'm going to estimate to survival plot to survival curves one for models whose age are 22 and then 41 on ones whose I like, 22 and 42.

91
00:11:08,900 --> 00:11:10,130
And that's what I'm doing here.

92
00:11:10,370 --> 00:11:18,620
So when I do covariance and that many data studies by feeding D is estimating the survival probability only for those people.

93
00:11:19,160 --> 00:11:21,800
And then I just save all of these objects.

94
00:11:22,310 --> 00:11:32,510
So I think survival is something that is called s u RV and then no mean just to like read these reviews all of my possible.

95
00:11:37,730 --> 00:11:43,380
I refuse my possible outcome. So if you are asking yourselves, How am I like doing this?

96
00:11:44,610 --> 00:11:49,200
Remember that the Cox model can be written into two different ways.

97
00:11:49,290 --> 00:11:57,000
One is in terms of the hazard ratios into the hazard I'm sorry, ratios.

98
00:12:02,680 --> 00:12:13,120
This is beta 1x1, for example. So this is one way to ride the cops model and the other model on the other way to ride it is in terms of the survival.

99
00:12:13,570 --> 00:12:18,850
So survival times or time D is the survival in times zero,

100
00:12:18,850 --> 00:12:27,610
which is like our base is the survival base curve to the power of E, to the power of veto 1x1.

101
00:12:28,780 --> 00:12:36,880
So what I'm doing here is first I'm going to feed the model with all of the people that is doing this.

102
00:12:37,510 --> 00:12:47,230
So I'm just going to feed the model with all people, meaning that I want to estimate the base case hazard ratio and also the estimates.

103
00:12:47,560 --> 00:12:56,200
And then based on those estimates, I want to estimate those survivals, but only for these people who are in this dataset.

104
00:12:57,430 --> 00:13:05,860
So that's what I'm doing until they're like, in-source, these part of the code on only saves the hours.

105
00:13:06,520 --> 00:13:10,420
Now all these part of the code only saves the outputs.

106
00:13:10,450 --> 00:13:15,759
Now I also want to like create a lot. So based on this output, I'm going to create a plot.

107
00:13:15,760 --> 00:13:17,200
I'm going to run a.

108
00:13:17,890 --> 00:13:27,640
As you plot data, it's feed the boss which is remember designate I decided to name the out of these proportional hazard model us people.

109
00:13:27,940 --> 00:13:29,290
So that's what I have here.

110
00:13:29,890 --> 00:13:40,200
And then I'm just like creating my log in x, I have time in Y, I have the survival probability, which is what I saved here.

111
00:13:40,600 --> 00:13:51,040
And then I want to create this line for each of the people, like for one zero, for based on my poverty variable.

112
00:13:52,240 --> 00:13:59,799
And then if I do that, the class looks something like this, which is the people object that we were talking about.

113
00:13:59,800 --> 00:14:07,390
So like when you save the professional hazard model for a specific set of people with some values in the covariates,

114
00:14:07,390 --> 00:14:11,140
he's going to look something like this. So here you have model age.

115
00:14:11,440 --> 00:14:15,400
Do you have four people? Poverty one, poverty zero.

116
00:14:15,820 --> 00:14:21,520
And then you have time and you have survival probabilities.

117
00:14:23,980 --> 00:14:29,590
This is time, although it seems like 0.20.4 does not seem like time.

118
00:14:29,920 --> 00:14:33,960
Remember that we did a follow up of one year. So this is just like in terms of years.

119
00:14:33,970 --> 00:14:37,000
So this is 0.2 year, 2.4 years.

120
00:14:39,520 --> 00:14:45,760
Does that make sense? Questions so far. Okay.

121
00:14:47,080 --> 00:14:52,810
And now the question is, how do we do it? Exactly the same on spot on art.

122
00:14:53,290 --> 00:15:00,270
So the first thing is just make sure our is taking us to factor all of the variables that you want to take as a factor.

123
00:15:00,640 --> 00:15:08,469
Because poverty is coded as one zero in the dataset that can be either continuous or a factor.

124
00:15:08,470 --> 00:15:17,680
So just to make sure it's a factor, just to us factor about things and then run your proportional House course model as we did before,

125
00:15:18,280 --> 00:15:27,010
make sure to include your two covariates in the model, and then we are going to create that same dataset that we did before.

126
00:15:27,370 --> 00:15:40,240
So in this case, I'm going to use X1, grid model age is equal to 22 and then see what these if you run it, it's going to give you something like this.

127
00:15:41,020 --> 00:15:52,270
Do I need to do I need to 2222 0.1 that that's all that is doing, just creating a dataset that only has like these two lines.

128
00:15:52,990 --> 00:16:01,240
And then you can do these the plug either using base R for the library that we were talking about last week.

129
00:16:01,570 --> 00:16:06,670
So our minor I'm using of minor because it's like charged us code.

130
00:16:07,030 --> 00:16:13,870
But if you want the code using base R, that's also in the thermal spectra notes.

131
00:16:14,500 --> 00:16:20,079
Okay. So using this library, I'm just going to do jigsaw flood here.

132
00:16:20,080 --> 00:16:24,430
I have exactly the same as I have here, just like all of my models.

133
00:16:24,430 --> 00:16:37,300
So survival seed, I have some data, one which is like my Cox model here I have new data, the data that I just created my cover.

134
00:16:37,750 --> 00:16:42,370
And then after that that rules data and then that's it.

135
00:16:42,880 --> 00:16:50,680
Just create a title, change the legend, and then change also like the line types.

136
00:16:50,680 --> 00:16:58,870
And that's when you are doing this. Just be careful with the following if.

137
00:17:01,170 --> 00:17:06,569
You remember got injured of the order in the order of the themes do not matter.

138
00:17:06,570 --> 00:17:08,600
But here it's moderately dopey.

139
00:17:08,940 --> 00:17:17,400
So if you role model age plus poverty, make sure when you are creating these might provide it's like in the same order.

140
00:17:17,430 --> 00:17:22,000
So first smolder age and then pull back.

141
00:17:22,260 --> 00:17:23,820
Okay. Not the other way around.

142
00:17:23,880 --> 00:17:32,820
So if you're square is moderate and then poverty, make sure your results were first moderate term, then forward, and then that's it.

143
00:17:33,390 --> 00:17:38,700
Hmm. If we round up those lines of code, we get exactly the same plot.

144
00:17:39,030 --> 00:17:45,480
So this is the survival probability for newborns?

145
00:17:45,630 --> 00:17:51,150
Well, in this case, survival is like time to event, which in this case, event is pneumonia.

146
00:17:51,810 --> 00:18:00,180
Of the newborns whose mothers are age 22 are 22 years old.

147
00:18:00,540 --> 00:18:08,910
And then I distinguish between two groups one with poverty equals zero, and then the other one with poverty equal one.

148
00:18:09,690 --> 00:18:15,500
Okay. So does that make sense? Okay.

149
00:18:17,810 --> 00:18:24,490
Now you. There are. So why not include it into a model?

150
00:18:24,520 --> 00:18:26,710
There are two ways to include covariance.

151
00:18:28,300 --> 00:18:38,890
I'm sure you already talked about this in class, but to include categorical carrots in the model, I can include a in two ways.

152
00:18:39,280 --> 00:18:47,230
So one way is what we just did. So literally just run survival and then add as a covariate.

153
00:18:47,240 --> 00:18:50,380
So you have model age and you also have poverty.

154
00:18:50,710 --> 00:18:58,840
So that's the first way. Just add one covariate into the model in this case model poverty.

155
00:18:59,200 --> 00:19:03,490
Or the other way is do something that is called stratification.

156
00:19:04,570 --> 00:19:08,860
So when we do a certification, we are running two different models.

157
00:19:09,520 --> 00:19:21,320
So I'm running survey survival. Only using moderate age for people whose poverty is equal to one.

158
00:19:21,920 --> 00:19:25,130
And then I'm doing exactly the same thing for.

159
00:19:25,580 --> 00:19:28,670
But then for people whose poverty is equal to two.

160
00:19:29,160 --> 00:19:32,030
Okay. So that was like kind of what we are doing.

161
00:19:33,020 --> 00:19:39,640
So in the first approach, what we just did is just like including folk, like recovery of poverty into the model.

162
00:19:40,070 --> 00:19:42,709
In the second approach, which is called stratification,

163
00:19:42,710 --> 00:19:51,500
what we are going to do is we are going to kind of see the model one for one group and then another model for the other group.

164
00:19:51,920 --> 00:19:58,130
When I say feeding the model, it's actually not that we are running two separate models because there is an assumption behind.

165
00:19:58,460 --> 00:20:05,600
So like if you look at these equations, this is a hazard ratio and this is the baseline hazard ratio.

166
00:20:05,990 --> 00:20:12,020
So what we are doing in general, remember that the proportional hazard, like the Cox model, works like this.

167
00:20:12,380 --> 00:20:14,630
So you have a hazard for time.

168
00:20:14,630 --> 00:20:23,660
T And this hazard which is like the risk can be interpreted on a like the way we model that the hazard is, is a base hazard.

169
00:20:25,260 --> 00:20:31,740
And then times e to the power of beta one times X, for example.

170
00:20:32,250 --> 00:20:35,610
So that might be something more than we are seeing.

171
00:20:36,090 --> 00:20:46,409
So what we did in the first approach was include a robot provided here that was included for working here with the second approach,

172
00:20:46,410 --> 00:20:47,680
which is a certification.

173
00:20:47,700 --> 00:20:55,990
What we are going to do is like instead of including a variable here, I'm going to change this baseline cluster to be two possible targets.

174
00:20:56,420 --> 00:21:01,670
The the base house are for the first group and then the base cluster for the second row.

175
00:21:02,040 --> 00:21:05,190
So I can start having one line here. I have two.

176
00:21:05,490 --> 00:21:13,620
I have the hazard ratio. It's equal to the baseline hazard for people in poverty equals zero times C to the

177
00:21:13,620 --> 00:21:20,189
power of beta one my variable moderate and then I have the same the baseline.

178
00:21:20,190 --> 00:21:22,469
The hazard is equal to the baseline hazard.

179
00:21:22,470 --> 00:21:31,020
But these cards are is for people in poverty one times e to the power of veto one more than h does that make sense?

180
00:21:32,250 --> 00:21:36,800
These guys see the difference between the two approaches. Okay.

181
00:21:37,580 --> 00:21:45,070
Very important. The second approach is that the only thing that we are changing between the two groups is the baseline concept.

182
00:21:45,470 --> 00:21:51,350
But the data remains the same. Okay, so notice that this equation beta is the same.

183
00:21:51,350 --> 00:21:54,890
I know I don't have like beta one. See your beta one one.

184
00:21:55,010 --> 00:21:58,430
No, I have one. So it's the same beta for the two groups.

185
00:21:58,670 --> 00:22:05,390
What is what I'm changing on the line is like the baseline hazard is just like different for the two groups.

186
00:22:07,250 --> 00:22:12,290
Okay, so how do we model B second approaching source.

187
00:22:15,210 --> 00:22:21,800
But one way to use the strata fall, which was mainly something that we already do plus class.

188
00:22:22,790 --> 00:22:26,570
So proc proportional hazard of my data.

189
00:22:26,840 --> 00:22:30,050
No summary just from like keep it turning the outcome.

190
00:22:30,380 --> 00:22:38,390
My model notice online model only includes my continuous variable in this case my older age, and then I have my stratum.

191
00:22:38,690 --> 00:22:42,470
So instead of having these as a group, I'm just going to do a start up off.

192
00:22:42,740 --> 00:22:52,520
And then here what I'm doing underlying is creating two different like baseline houses and that's when you flip this model,

193
00:22:52,760 --> 00:22:57,440
you are going to only have one beta and the beta is the same for the two groups you

194
00:22:57,440 --> 00:23:01,960
fit this model you have the beat of Mother H is a different one that we found before.

195
00:23:01,970 --> 00:23:04,370
Yes. Because like we are using different approaches.

196
00:23:05,870 --> 00:23:13,240
This is a while first and you have to look whether like you should include or not include this variable your model using like the p value here.

197
00:23:15,620 --> 00:23:18,730
Does that make sense? Any questions so far?

198
00:23:20,090 --> 00:23:25,220
Okay. That's good. Now, how do we do it in our.

199
00:23:30,700 --> 00:23:40,330
My function for Cox proportional hazard, my survival based on my absurd time on myself to field up.

200
00:23:40,720 --> 00:23:46,180
I have moderate age and I also think the poverty but surrounded poverty I do a.

201
00:23:46,940 --> 00:23:50,590
Okay. So that's the way to do it. I do it straight up poverty.

202
00:23:54,340 --> 00:24:01,060
One in the other approach. I was just I was like only end up over three floors, an older age.

203
00:24:01,190 --> 00:24:04,540
Here I do a lot of poverty and that's it.

204
00:24:05,110 --> 00:24:16,430
We get the estimates. They are exactly the same as the ones that we found using source.

205
00:24:19,110 --> 00:24:22,150
All right. Any questions so far?

206
00:24:24,860 --> 00:24:32,070
All right. So that's basically one first part of the law.

207
00:24:32,550 --> 00:24:38,460
So the first part is, is basically we're like, how do we model these things?

208
00:24:38,820 --> 00:24:47,879
So we have two approaches whenever like it's if you are trying to decide whether a categorical variable you should include or not,

209
00:24:47,880 --> 00:24:53,190
including the model, there are two approaches. The first one is to use like includes as covariates.

210
00:24:53,190 --> 00:24:56,400
So survival of the mother age and poverty.

211
00:24:56,430 --> 00:25:04,300
That's one approach or the other approach is survival moderate and then is stratified bipolar.

212
00:25:04,920 --> 00:25:12,989
They give you different results. Yes, of course. Because like we are modeling things differently, mainly because in the second approach,

213
00:25:12,990 --> 00:25:17,310
what we are doing is changing the base like cost for each of the groups.

214
00:25:18,450 --> 00:25:23,120
So that is what we are using, like one covariate and we can do that very freely.

215
00:25:23,700 --> 00:25:27,240
What happens if we have tons of variance? So for example.

216
00:25:30,250 --> 00:25:33,670
In our data said we have a lot of other covariates.

217
00:25:33,670 --> 00:25:34,360
So for us.

218
00:25:35,020 --> 00:25:48,130
So for example we also have like baby's birth weight, we have race and we have education like a lot of the model, like teen years in a school.

219
00:25:48,640 --> 00:25:57,370
So we have a lot of variables. It gets a little complicated on how to like select which variables should I or should I not include in the model?

220
00:25:58,120 --> 00:26:03,190
But I have a couple of ways to like decide which one I should or should not include.

221
00:26:03,970 --> 00:26:08,470
In this course. We teach something that is called forward selection.

222
00:26:09,310 --> 00:26:15,340
So in forward selection, basically, basically our main goal is so I have a lot of covariates.

223
00:26:15,640 --> 00:26:19,900
I want to decide based on like which model is better.

224
00:26:20,860 --> 00:26:24,610
I want to decide which variables I should include in my final model.

225
00:26:24,760 --> 00:26:30,459
And that's okay. That's all we are doing. My main objective is I have tons of covariates.

226
00:26:30,460 --> 00:26:35,470
I want to decide which ones I want to include and we are using for selection for that.

227
00:26:36,730 --> 00:26:45,790
So far wide selection, the first thing we're going to do is just feed the proportional hazards regression with all of our covariates.

228
00:26:45,970 --> 00:26:57,960
So look at the here I have absolutely all of my covariance and then I do selection forward include equal to one ensures that the first variable

229
00:26:57,970 --> 00:27:07,420
that I have here in this case Mother H will be included in the model and then the s a specify the alpha level that we are using to compare.

230
00:27:08,410 --> 00:27:13,899
So what we are doing in SAS because this varies between styles, unlike in SAS,

231
00:27:13,900 --> 00:27:19,090
what we are doing is that task is going to feed a bunch of different models, many, many models.

232
00:27:19,390 --> 00:27:28,600
So for example, one model is just model age, another model is mother H and baby babies with babies weight.

233
00:27:28,960 --> 00:27:32,980
Another model is model H based baby's weight and race.

234
00:27:33,280 --> 00:27:41,200
And then we are going to just select the model that has the most number of significant covariates.

235
00:27:41,560 --> 00:27:43,630
That's what we are doing and says, okay,

236
00:27:44,020 --> 00:27:52,060
you can see that there are many moments that we can find and the if we have more covariates and there are many other models of the country.

237
00:27:52,450 --> 00:27:58,840
So that's what we just do like a forward selection because instead of like me having to like feed all of the models by hand,

238
00:27:59,170 --> 00:28:04,629
it's just easier to say sort of, you know what, do yourself, give me, give me the final model.

239
00:28:04,630 --> 00:28:12,190
And I know that the final model is going to have the most significant covariance, the most number of significant convincing the model.

240
00:28:12,880 --> 00:28:17,740
So when you run this, it may take a while, especially if you have a lot of covariates.

241
00:28:18,700 --> 00:28:25,840
The result there are many tables, but the most important table is called analysis of maximum likelihood estimates.

242
00:28:26,260 --> 00:28:36,400
And this table only includes model age and years of education, which means that according to source, I'm using a 5% significance level.

243
00:28:36,760 --> 00:28:41,890
This is the best model. Then we can see, okay, this is the best model that we can pick.

244
00:28:42,760 --> 00:28:54,850
So to estimate the survival probability, in this case the survival times women to get pneumonia in the first year of life of a newborn.

245
00:28:55,210 --> 00:29:00,340
The two best predictors that I could find were mother age and years of education.

246
00:29:00,880 --> 00:29:06,010
Okay, um. Any questions so far?

247
00:29:11,190 --> 00:29:20,790
All right. In our four war selection works, morale was the same, so the approach is exactly the same.

248
00:29:20,800 --> 00:29:27,240
I'm going to fit our model with all of the covariates, and then I'm gonna let our decide based on our criteria,

249
00:29:27,840 --> 00:29:32,580
which is the best model using any combination of the core values that I have.

250
00:29:33,420 --> 00:29:39,030
He says the base model is defined as the model with the most significant variables.

251
00:29:39,240 --> 00:29:43,260
So that's why I have to specify my level of significance.

252
00:29:43,320 --> 00:29:50,010
That is the 5% tip. These are the best model is based on the I.

253
00:29:53,480 --> 00:29:57,360
Yeah. Like I'm missing something. Okay, see, that's the only difference.

254
00:29:57,370 --> 00:30:05,060
So sus uses, like, significance. Ah, uses. But at the end, the output should look something.

255
00:30:05,510 --> 00:30:12,260
Some should look very similar. I should have a table with only the variables that I should include in my model.

256
00:30:13,460 --> 00:30:17,240
So here, make sure pneumonia is my factor.

257
00:30:17,600 --> 00:30:21,170
Feed the Cox proportional model with all of your covariance.

258
00:30:21,440 --> 00:30:25,010
So I'm including all of my comments here and then.

259
00:30:27,590 --> 00:30:37,459
And then because I know that moderate age should be a predictor in my model, I'm also going to include, I'm going to think some models.

260
00:30:37,460 --> 00:30:46,670
I'm going to fit a model with only model age and that just because I know model age should be in the model in source.

261
00:30:46,880 --> 00:30:55,430
We did that by setting include equal to one here in our what we are doing is just feeding two

262
00:30:55,430 --> 00:31:01,040
models one we also we compare it's one we think of it as I know it should be in the model.

263
00:31:01,730 --> 00:31:07,250
And then there's a function that is called step.

264
00:31:08,450 --> 00:31:18,260
That is within this package call malt comp that is going to do the poorer selection for us.

265
00:31:19,510 --> 00:31:29,630
So the first problem within the formula it's included, which is like these model with all these cooks, proportional model with model age.

266
00:31:30,700 --> 00:31:36,130
Then I have another parameter called a scope that is going to like.

267
00:31:37,070 --> 00:31:45,930
Basically I'm telling our. The possible covariance he has to choose among from.

268
00:31:47,190 --> 00:31:50,930
So I have. Modern age here.

269
00:31:52,990 --> 00:31:55,930
And then I have all of the other variables here.

270
00:31:56,800 --> 00:32:03,790
So feed three remember that has all of the variables and then include has only one and then direction.

271
00:32:03,790 --> 00:32:13,570
It's all forward because there are many types of algorithms that we could use to select variables.

272
00:32:14,380 --> 00:32:19,240
One is called forward selection. The other. The other one is, for example, backwards selection.

273
00:32:20,140 --> 00:32:24,410
So here I'm just specifying for one because that's the algorithm that we are using.

274
00:32:24,850 --> 00:32:28,510
And then if you do a summary of the function that we have here.

275
00:32:30,710 --> 00:32:37,140
It should give you the variables. But we shrink, you know it.

276
00:32:37,170 --> 00:32:41,920
Notice that the light output looks different than in solace.

277
00:32:42,280 --> 00:32:48,110
And the reason is because here we are using 1880.

278
00:32:49,100 --> 00:32:53,839
Okay. So if we use a C, we should also include both ways.

279
00:32:53,840 --> 00:33:00,220
Think the model. Okay.

280
00:33:01,850 --> 00:33:06,950
Any questions so far? Okay.

281
00:33:07,310 --> 00:33:14,150
So so far we want to feed. COX Proportional model.

282
00:33:15,450 --> 00:33:22,470
If we want to like answer the question, like how to model our categorical covariant, we have two options.

283
00:33:22,800 --> 00:33:28,350
One is just to added into the model, you know, like model H plus poverty.

284
00:33:28,650 --> 00:33:31,770
And then the other one is we stratify analysis and.

285
00:33:33,730 --> 00:33:43,840
Which one should we use it based? Like demonstrations should be based on like your analysis of, of the data and of the assumptions that we are doing.

286
00:33:43,840 --> 00:33:49,719
So for example, Nina, so I defy you already know that it's like a big assumption at least by changing the

287
00:33:49,720 --> 00:33:55,360
baseline password for each of the if for each of the level of these such fine variable.

288
00:33:56,080 --> 00:34:01,600
So just like based on the assumptions that you're making, choose between one or the other.

289
00:34:04,600 --> 00:34:08,290
Type of modeling for categorical surveys.

290
00:34:08,560 --> 00:34:16,540
And then even more generally speaking, if I have a set of covariates, how do I choose which ones should entering the model?

291
00:34:17,350 --> 00:34:21,909
There are different methods in this class with each something that is called before work selection

292
00:34:21,910 --> 00:34:31,210
method in SAS is selecting among a set of good variants the ones that give me the best p value possible.

293
00:34:31,780 --> 00:34:35,870
In R, we are doing the same thing among a set of covariates.

294
00:34:35,920 --> 00:34:40,310
I'm glad. Choose the ones that give me the best AIC value.

295
00:34:40,630 --> 00:34:47,500
Okay. And at the end I should like have a table like this that tells me which variables I should including them on.

296
00:34:49,450 --> 00:34:53,530
So until now, we just like we are.

297
00:34:53,920 --> 00:34:58,750
Until now, we have made a lot of models, proportional hazard models.

298
00:34:58,930 --> 00:35:05,830
However, we have checked whether the proportional hazard assumption is met or not in any of these models.

299
00:35:06,250 --> 00:35:10,629
So last week we talked about there is a way to check for the proportional cause.

300
00:35:10,630 --> 00:35:15,280
Ah, that's one option. And that is using the log of log plot.

301
00:35:15,730 --> 00:35:23,560
However, that. That approach that we talked last class is useful when you only have one variant.

302
00:35:24,010 --> 00:35:27,580
So it's no longer useful here because they have a ton tons of covariance.

303
00:35:27,880 --> 00:35:32,410
So there should be a way to check for the proportional hazards assumption.

304
00:35:33,310 --> 00:35:40,980
So there are three ways to set ones. So here the first one lower block.

305
00:35:41,740 --> 00:35:44,139
We already did this. However,

306
00:35:44,140 --> 00:35:53,050
to just take into account that these make sense when I have only one pervading the models and the assumption is met if the lines are part of them.

307
00:35:54,580 --> 00:35:58,930
There is another one that I could use that is like using risky, grounded plots.

308
00:35:59,770 --> 00:36:04,150
These we will do next lab because you haven't talked about this one in class

309
00:36:04,480 --> 00:36:09,460
and there's a third one that is adding a time dependent cover to the model.

310
00:36:09,940 --> 00:36:15,130
So if you look at our model, so for example, if you look at these model.

311
00:36:21,260 --> 00:36:24,710
None of my variables are time dependent, right?

312
00:36:25,100 --> 00:36:31,220
So my age is not time dependent. It seems like the mother's age is not the mother's age of time.

313
00:36:31,270 --> 00:36:36,510
Teen always use older age like a baseline when they have to eat poverty.

314
00:36:36,530 --> 00:36:45,890
So also like poverty of babies, like baby weight is like also, you know, the newborns baby weight on baseline.

315
00:36:46,130 --> 00:36:52,430
So all of these are covariates taken at baseline. However, unlike in Survivor, we have a full follow up time.

316
00:36:52,790 --> 00:36:58,040
In general, it is not recommended that we include covariance time defending covariates

317
00:36:58,040 --> 00:37:01,640
because that will be like a violation of the proportional hazard assumption.

318
00:37:02,000 --> 00:37:08,389
So that's why we don't have it. There are especially cases where you can find the medical learnings about life in general.

319
00:37:08,390 --> 00:37:11,810
You will find the most general models would look something like this.

320
00:37:12,110 --> 00:37:15,319
All of the various all of the covers were taken at baseline.

321
00:37:15,320 --> 00:37:22,130
And that makes sense because we don't want to include any time dependent things because we want the proportional password assumption to be met.

322
00:37:24,410 --> 00:37:32,420
So spent approach to checking for the proportional hazard about some kids basically plays with that.

323
00:37:32,990 --> 00:37:40,549
So what we're going to do is we're going to and create a new time dependent covariate into

324
00:37:40,550 --> 00:37:46,310
the model and then I'm gonna check for the significance of that time dependent covariate.

325
00:37:46,790 --> 00:37:53,450
If the variable is not significant, then the assumption is met.

326
00:37:53,630 --> 00:37:57,500
However, if the variable is significant, the assumption is not met.

327
00:37:58,220 --> 00:38:03,290
Why? It doesn't make sense because the proportional hazard assumption is telling you that.

328
00:38:04,540 --> 00:38:09,730
The ratio of the hostages between the two groups remains the same in time.

329
00:38:10,000 --> 00:38:13,990
So is not time dependent, right? Does that make sense?

330
00:38:14,350 --> 00:38:23,280
Is not time to find the proportion so that someone literally tells me that if I have two groups and I estimate because I been one group over,

331
00:38:23,290 --> 00:38:27,190
because out of the other group that value remains constant over time.

332
00:38:27,280 --> 00:38:31,360
It doesn't change. Right. That's the proportional hazards assumption.

333
00:38:31,900 --> 00:38:37,900
So if I'm modeling the hazard because that's what we are doing in the Cox proportional hazard,

334
00:38:37,900 --> 00:38:44,760
I'm modeling the hazard and I find that there is a variable which is time depends on any significance.

335
00:38:45,040 --> 00:38:49,450
It's kind of telling me that these hazard are changing, like according to TIME.

336
00:38:49,600 --> 00:38:52,870
Right. So that should be a violation of the assumption.

337
00:38:53,290 --> 00:38:56,640
So that's like the idea behind this third method.

338
00:38:58,030 --> 00:39:04,240
So how do we do that third method? Oh, um, one additional thing.

339
00:39:05,380 --> 00:39:09,910
So this second one we are going to talk about next up because you haven't covered that in class.

340
00:39:10,300 --> 00:39:13,390
And between the first one and the third one.

341
00:39:13,750 --> 00:39:18,670
So the first one, we generally use it if we only have one covariant.

342
00:39:19,780 --> 00:39:26,920
But you also kind of do this if you only have one. Covariate So the question is how do we chose like between the first one and the third one?

343
00:39:28,480 --> 00:39:33,730
In general, the third one is a preferred method because here I'm using the p value.

344
00:39:34,270 --> 00:39:37,960
Well, here I'm like observing the graph and assessing.

345
00:39:38,620 --> 00:39:43,660
I subjectively assess whether those lines are part of it or not.

346
00:39:44,050 --> 00:39:53,410
So like, if you ask like. Any researcher probably they should like more or less one these because it's based on the p value and something like that.

347
00:39:53,410 --> 00:39:59,680
It's like statistically significant while this is based on like subjectivity, you know,

348
00:39:59,680 --> 00:40:04,810
like are those two lines but a little that would be a yes for me and no for you.

349
00:40:06,100 --> 00:40:08,530
Okay, so now how do we do the third one?

350
00:40:09,040 --> 00:40:21,760
Oh, I'm changing the data from here to the data set that you have been working in class, which is the myeloma dataset.

351
00:40:21,770 --> 00:40:31,270
So this is me just changing the dataset. Okay, so I feed my model.

352
00:40:31,510 --> 00:40:34,540
I have my proportional regression here.

353
00:40:34,930 --> 00:40:38,450
I have my two variables time, observe time.

354
00:40:38,510 --> 00:40:43,030
That is that myself. But here I have all of my covariance right here.

355
00:40:43,510 --> 00:40:46,840
And then I'm going to add a new variant to.

356
00:40:48,430 --> 00:40:53,020
This new covariate is called age log time.

357
00:40:53,560 --> 00:40:58,780
And what I'm doing here is just creating a covariant that depends on time.

358
00:40:59,320 --> 00:41:06,640
How does it depend on time? So it's my normal h times log of time, which time is here?

359
00:41:06,880 --> 00:41:11,440
So like is time dependent. So I'm just like creating a new covariate.

360
00:41:11,770 --> 00:41:14,260
This new for variant is not in this theta set.

361
00:41:14,530 --> 00:41:23,110
So maybe I guess I only have only like these three covariate and I like creating these new one just to like check for do

362
00:41:23,120 --> 00:41:32,080
proportional has an assumption that t how do I create up time depending on the value h times the log of time on that so.

363
00:41:33,290 --> 00:41:36,590
I just create something that is my time dependent.

364
00:41:37,040 --> 00:41:40,520
I run that line. I run that model.

365
00:41:41,030 --> 00:41:47,120
I have all of my estimates. I go to my agent if I have an environment and I look at the p value.

366
00:41:48,790 --> 00:41:53,930
So the p value is telling me this is not significant because it's not significant.

367
00:41:53,950 --> 00:41:57,640
I have a strong evidence that the proportional hazard assumption is met.

368
00:41:58,180 --> 00:42:05,880
So something says. Okay.

369
00:42:06,570 --> 00:42:12,930
Any questions so far? Um.

370
00:42:13,760 --> 00:42:21,739
Okay. And then how do we fit this in our, um, again, my function.

371
00:42:21,740 --> 00:42:28,670
COX Proportional hazard. I have my survival object here, which depends on the time on my daily survival.

372
00:42:29,720 --> 00:42:38,830
I have all of my career efforts and then, you know, ah, the way to create this, the way to create these, um.

373
00:42:40,550 --> 00:42:49,490
Time dependent variable is using the function t t so time t t h is creating a time dependent

374
00:42:49,490 --> 00:42:56,150
variable in the sense that here I'm going to define that as a function of h on time.

375
00:42:56,540 --> 00:43:00,830
So I'm doing h times log of t, which is time.

376
00:43:02,790 --> 00:43:06,210
And that's it. So it's like a little bit different.

377
00:43:07,090 --> 00:43:19,650
The source of the logic is the same. So here I'm just going to use the function d h and then use my data set and then probably find that function.

378
00:43:19,950 --> 00:43:29,340
So that thing is going to be a function that depends on x and thi and then the function is h times log of the x type of thing.

379
00:43:29,700 --> 00:43:34,590
And that's it. I run that model and then.

380
00:43:37,420 --> 00:43:43,450
Looked at the P-value. P-value greater than 0.05.

381
00:43:43,570 --> 00:43:46,840
My variable is not significant. I have enough.

382
00:43:48,150 --> 00:43:55,200
Yes. My failed original hypothesis. Meaning that I think that the proportional hazards assumption is met in this case.

383
00:43:59,440 --> 00:44:09,140
Okay. There is one more thing that we should talk about today, which is called martingale residuals.

384
00:44:09,920 --> 00:44:16,190
However, we are almost run out of time, so I'm going to leave that for the next lap.

385
00:44:16,190 --> 00:44:18,170
Okay. Given that you don't need. It's like.

