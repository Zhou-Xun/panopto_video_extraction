1
00:00:03,980 --> 00:00:10,840
All right. Welcome to another five three, love.

2
00:00:11,920 --> 00:00:20,140
So today we are going to start talking about homework numbers six, I believe, which corresponds to handout 14.

3
00:00:20,830 --> 00:00:25,660
Yes, which is what I'm doing now. These things are like dependent outcome analysis.

4
00:00:27,100 --> 00:00:31,480
Yes. That means that these are where we are going to go through today.

5
00:00:32,020 --> 00:00:40,810
You don't need to use it for the homework that is due, I believe, on Wednesday, but it will be very, very useful for the last 4 minutes.

6
00:00:42,340 --> 00:00:57,850
So. So today's outlining is for us to we are going to finish our checking the proportional hazard assumption because we haven't finished that.

7
00:00:58,240 --> 00:01:07,240
And after that, we actually I'm not going to talk about any like a statistic, a statistic concept, a statistical concept or anything like that.

8
00:01:07,510 --> 00:01:17,290
We are actually going to work on like how to change or how to work with datasets in SAS or are just because when you are.

9
00:01:19,020 --> 00:01:22,020
In a couple of weeks when you would like to start doing your homework,

10
00:01:22,020 --> 00:01:30,450
you're going to realize that it's easier to use one or the other ways of like creating a data source.

11
00:01:31,350 --> 00:01:35,760
So first of all, this is very useful for your next homework.

12
00:01:36,630 --> 00:01:40,950
So remember everything that we did in survival analysis.

13
00:01:41,250 --> 00:01:44,670
It was related to the Cox proportional hazard model, right?

14
00:01:45,030 --> 00:01:48,440
But then I'm like, it's it's right there in the name.

15
00:01:48,450 --> 00:01:53,040
It's proportional. So we should try for the assumption of proportional hazards,

16
00:01:53,460 --> 00:02:00,000
which means that the ratio of two populations of the hazard of two populations over time does not change.

17
00:02:00,120 --> 00:02:05,220
Right. And we want to check for that. There are a couple of ways to check for that.

18
00:02:05,310 --> 00:02:14,950
The first one is using the log of law. This is a plug that in the Y axis has the nub of the log of the survivability.

19
00:02:15,270 --> 00:02:24,150
I mean, the X axis has the log of time. And here we are interested in like check whether those two lines are parallel or not.

20
00:02:24,540 --> 00:02:30,810
If there are crossings means they are not parallel where that's a violation of the assumption.

21
00:02:31,230 --> 00:02:37,600
However, with this first. Possible way to check for gas.

22
00:02:37,600 --> 00:02:40,830
I'm sure we have a couple of caveats.

23
00:02:41,080 --> 00:02:45,880
The first one is that it's very useful when you only have like two groups on one covariate,

24
00:02:46,330 --> 00:02:50,500
but when you have multiple covariates, it's like, I don't know what to do here.

25
00:02:51,040 --> 00:02:54,609
And then the second one is that it's completely subjective, right?

26
00:02:54,610 --> 00:03:00,520
Because it's only up lot. And you are the one who's deciding based on that, plus whether the assumption holds or not.

27
00:03:02,140 --> 00:03:12,280
Last lap last week we were talking about assumption for for number three to check the assumption that is adding a time dependent covariate.

28
00:03:12,640 --> 00:03:19,720
So when I'm running the model, I'm going to run the models with all of my covariates plus a time dependent covariate, right?

29
00:03:20,410 --> 00:03:26,649
That covariates is like h times time or something like that, or h times log of time or something like that.

30
00:03:26,650 --> 00:03:27,340
It doesn't matter.

31
00:03:27,820 --> 00:03:36,910
And here we are checking whether that your covariate it's significant or if it is significant, it means there's a violation of the assumption.

32
00:03:39,380 --> 00:03:43,690
If it is not significant, it means that the assumption is mixed.

33
00:03:44,120 --> 00:03:48,800
We like this approach more than the other one because it is not about subjective, right?

34
00:03:48,820 --> 00:03:53,570
We have a p value. We have some physical metric that we are using to compare those things.

35
00:03:54,320 --> 00:03:57,559
And tonight we are going to. However. Okay. So however.

36
00:03:57,560 --> 00:04:01,000
The carry of these. Okay.

37
00:04:01,000 --> 00:04:05,020
No, actually. Is that a copy? There's this another way we can check for the assumption.

38
00:04:05,380 --> 00:04:12,040
I'm using something that is called the Schoenfeld Residuals Plus, which is something we are going to cover today.

39
00:04:15,430 --> 00:04:20,860
So first, how do we ask source to get those votes, which you do also?

40
00:04:22,500 --> 00:04:27,399
Here I'm just running my proportional hazard model.

41
00:04:27,400 --> 00:04:29,740
So proportional has a regression.

42
00:04:30,070 --> 00:04:38,290
I have my observer time on my delta variable and then I have two possible covariates mother, mother, age and years of education.

43
00:04:38,320 --> 00:04:40,750
Here we are using the same dataset we used before.

44
00:04:41,140 --> 00:04:48,550
And then the important part comes in the output, in the output, and the only slight saving the output with the out statement.

45
00:04:48,880 --> 00:04:55,410
But I'm also calling for the residuals and then s c h which is like the name of the.

46
00:04:56,600 --> 00:04:59,200
Inventors creator of these like medicines.

47
00:05:00,410 --> 00:05:07,760
So calling for the receipt was this receipt goes, I have one send off like receipt gloves for each variable.

48
00:05:08,090 --> 00:05:12,530
So since I have two variables in them order, I have to create two residuals.

49
00:05:12,530 --> 00:05:19,009
And these are just the names that I just decided to assign. So molar age and press equals one years of education.

50
00:05:19,010 --> 00:05:23,570
And then I see if I have more covariance and I have to do that multiple times.

51
00:05:24,650 --> 00:05:30,980
I know the other thing I'm going to do is use, I'm going to plot. So I'm going to create a plug for each variable in my model.

52
00:05:31,160 --> 00:05:37,820
Here I have the plot for Mother Age, Mother's age, and then here I have the plot for years of education.

53
00:05:38,180 --> 00:05:43,760
I'm using as she plot Broca's plot data is my output.

54
00:05:43,850 --> 00:05:47,200
So notice that here I'm.

55
00:05:51,190 --> 00:05:54,700
So notice that here I would put my data.

56
00:05:56,180 --> 00:06:02,930
Is the output of the. Proportional has a regression.

57
00:06:03,500 --> 00:06:10,160
And then here I'm just creating lines in the background so we can like notice those lines.

58
00:06:10,580 --> 00:06:14,570
And then the important part is here. So I'm going to run the lines.

59
00:06:14,870 --> 00:06:22,040
So like a smooth line y it's going to be my residuals so moderate age that residuals for my

60
00:06:22,040 --> 00:06:28,489
first variable mother H and then X is my time variable and I'm going to do exactly the same.

61
00:06:28,490 --> 00:06:32,479
But for other, for the other variable. So the code is exactly the same.

62
00:06:32,480 --> 00:06:38,660
I'm still using them. It's just like I will arrive here when I use the in-laws command y.

63
00:06:38,660 --> 00:06:43,370
It's my years of allocation residuals and that's see, that's not true.

64
00:06:43,380 --> 00:06:47,120
I made two, two plots, one for each variable in the y axis.

65
00:06:47,120 --> 00:06:57,410
I have the sequence and yeah, I'm in the X-axis, I just have the time and then the output output looks something like this.

66
00:06:57,890 --> 00:07:03,020
So for each variable, I'm going to assess whether the assumption calls or not.

67
00:07:04,490 --> 00:07:16,040
We are like looking fairly that the is multiplying that cells or I create this like centered around zero okay and it's like randomly centered.

68
00:07:16,040 --> 00:07:21,619
I don't see any patterns. So in this case, yes, of course, like here I don't see any problems here.

69
00:07:21,620 --> 00:07:28,970
I can kind of see like a little bit of something happening, especially like here in this y time or maybe here.

70
00:07:29,300 --> 00:07:34,190
But it's like, you know, like mostly concentrate on zero, which is like something good.

71
00:07:34,190 --> 00:07:42,290
It means the assumption is met. The only thing I would like analyze in this plot is like.

72
00:07:43,980 --> 00:07:48,480
So the x axis is the time, right? And the time is in years.

73
00:07:48,660 --> 00:07:52,600
So I follow up all of these people for one year and this is my year.

74
00:07:52,620 --> 00:07:59,640
So this is 0.2 years, 0.4 years, 0.5 years, which means like six months, so on and so forth.

75
00:08:00,180 --> 00:08:05,310
And as you can see, it seems like it, although it wasn't something that we noticed before.

76
00:08:05,640 --> 00:08:12,380
It seems like at the time it's like a discrete variable because I only have like times here.

77
00:08:14,160 --> 00:08:17,760
I'm here. On here.

78
00:08:19,230 --> 00:08:23,550
On here. But I don't have nothing in between, you know.

79
00:08:23,910 --> 00:08:35,010
So what I mean by that is, for example, I don't have something in exactly 0.2, so I don't have something here or I also don't have something here.

80
00:08:35,550 --> 00:08:42,150
So do you see like if I draw lines, they I'm like mostly all of the points within the same light.

81
00:08:43,050 --> 00:08:49,530
This is an indication that our time variable observe time, it's a discrete variable.

82
00:08:49,860 --> 00:08:56,250
And all of the analysis we have done so far works best if our variable this continues.

83
00:08:56,550 --> 00:08:59,430
So that's something to like. Be aware of.

84
00:09:00,510 --> 00:09:11,489
There is some other class of methods that work very well that are called like survival, discrete survival, that work very well in this case,

85
00:09:11,490 --> 00:09:18,180
when you're outcome variable, when the observed times are actually discrete times instead of like a continuous random variable.

86
00:09:19,140 --> 00:09:24,540
However, in this case, like for the purpose of the class, we are not going to talk about those.

87
00:09:24,890 --> 00:09:27,990
But that's something that is like fairly important to notice either.

88
00:09:27,990 --> 00:09:32,490
You may see that the model is not give you reasonable estimates.

89
00:09:32,490 --> 00:09:39,480
You may find out it's up to those made by biological sense, something that may happen in like something like this.

90
00:09:39,810 --> 00:09:43,350
So you're assuming that the time is continuous, but actually, as you can see,

91
00:09:43,590 --> 00:09:49,290
it seems like here the time is discrete, which does not work very well with a class of models we are using.

92
00:09:49,920 --> 00:09:53,660
Does that make sense? A little bit. Okay.

93
00:09:54,570 --> 00:09:58,280
So moving on. That's. Oh, no, no.

94
00:09:58,290 --> 00:10:07,120
How do we do it in our. Okay.

95
00:10:07,480 --> 00:10:15,640
So in our. I'm going to use my Cox proportional hazard function.

96
00:10:16,020 --> 00:10:19,190
Remember that all of this is from the survival package.

97
00:10:19,210 --> 00:10:23,500
So for our survival, there is cell survival and then library survival.

98
00:10:24,010 --> 00:10:30,040
Here I have my function. So this is a survival function of my observed times on my deltas.

99
00:10:30,400 --> 00:10:34,240
And then I have two possible covariates, moderate age and years of operation.

100
00:10:34,480 --> 00:10:38,170
So I just run my model. So first step in our end is just write your model.

101
00:10:38,920 --> 00:10:42,580
And then the second step is to plot.

102
00:10:42,910 --> 00:10:45,670
So I can do a lot of these things.

103
00:10:50,300 --> 00:11:01,270
So the first thing I'm going to use is I'm going to call a function that is called Cox Dot, CPR, H, which is called Solidarity Tools.

104
00:11:01,820 --> 00:11:05,510
And then in parentheses, I have my Cox model.

105
00:11:05,570 --> 00:11:09,980
So I find this is I have this and then I'm going to do log of that.

106
00:11:10,220 --> 00:11:16,480
Okay. And then remember that we have received once for each variable.

107
00:11:16,960 --> 00:11:22,210
So here I'm using one to get the rescued months for the first variable I'm

108
00:11:22,210 --> 00:11:27,770
using two for get together as he seatbelts for the second video and that's it.

109
00:11:28,690 --> 00:11:35,260
When you run this, it looks something like this is not exactly the same as the ones that we had.

110
00:11:35,650 --> 00:11:43,690
SAS And that's because in SAS you have the sequence and then you have something that is called the.

111
00:11:47,120 --> 00:11:52,320
I think is weighted procedurals. So it's like a transformation of the variable.

112
00:11:53,580 --> 00:11:57,150
You don't need to worry about. This is going to give you the same information,

113
00:11:57,960 --> 00:12:04,940
just like when you are comparing your answers on your homework with your for mate and they are using like a different software to use.

114
00:12:04,950 --> 00:12:10,440
Make sure like you understand this, you are not going to have exactly the same answers just because SAS uses routine ones.

115
00:12:10,710 --> 00:12:16,560
And then our users like the transformation of their fuels. Right here we can analyze the same things that we did before.

116
00:12:17,310 --> 00:12:29,300
So again, to check for the assumption we are looking whether these plus these like nine here, it's like randomly around zero for the two of them.

117
00:12:29,310 --> 00:12:35,920
Notice that these are having very around zero, which is sort of like our own zero, but not like some randomly.

118
00:12:36,360 --> 00:12:39,870
And then you can also says the same thing that we did before.

119
00:12:40,620 --> 00:12:44,130
Notice that the x x axis is time.

120
00:12:44,520 --> 00:12:47,880
However, it seems that I only have like this grid times.

121
00:12:51,670 --> 00:12:56,230
I don't have anything, for example, here, so it seems like it's discrete, right?

122
00:12:56,710 --> 00:13:03,010
So we can analyze the same thing, either using source or find any questions so far.

123
00:13:04,940 --> 00:13:10,550
Okay. That's good. Okay.

124
00:13:16,510 --> 00:13:25,120
Another example that may be very useful to take into account is that in these examples that we have here,

125
00:13:25,120 --> 00:13:28,480
for example, age, it's a continuous variable.

126
00:13:28,900 --> 00:13:33,700
So the residuals like I would expect them to be randomly around zero.

127
00:13:33,790 --> 00:13:41,220
That's what I want. I want to see is spots around zero randomly, but that's because age is continuous.

128
00:13:41,230 --> 00:13:47,140
What happens if I want to plug the same thing, but for a categorical variable, let's say 40.

129
00:13:48,070 --> 00:13:52,420
So in this case, poverty can only take value of zero of one.

130
00:13:52,870 --> 00:13:56,740
So my plug is the number supposedly looks something like this.

131
00:13:57,250 --> 00:14:01,180
So instead of like having random like dots everywhere,

132
00:14:01,180 --> 00:14:09,130
I'm just going to have like dots very near like the axis and then plot very like around one or something like that.

133
00:14:09,610 --> 00:14:17,620
However, what I want, it's still the same. I just want to see something that is fairly random around zero.

134
00:14:17,980 --> 00:14:22,870
Okay. That's what I want. I want to see something that is fairly random around zero.

135
00:14:25,120 --> 00:14:32,590
So the interpretation. Interpretation changes a little bit whether you are using a categorical or a continuous variable.

136
00:14:32,860 --> 00:14:36,640
However, to check for the assumption, we do exactly the same thing.

137
00:14:36,940 --> 00:14:44,140
I just love their seed ones. And then I'm going to look for a line that is like randomly around zero.

138
00:14:44,200 --> 00:14:48,060
And if that happens, then yes, the assumption is made.

139
00:14:48,250 --> 00:14:56,140
If it does not happen, then okay, maybe there is something going on and then the line is going to be flawed by source or R.

140
00:14:56,260 --> 00:15:00,190
So that's why we are using, for example, in source,

141
00:15:00,250 --> 00:15:08,740
that's why we are using these like lines statement to plot that line and then assessing where the red line is like fairly around zero or.

142
00:15:10,670 --> 00:15:15,270
Make sense. So, for example, in the case of a cat, they want to come by holding my belts.

143
00:15:15,320 --> 00:15:19,530
Sound like here. I'm here. But their life is, like, friendly around here.

144
00:15:22,620 --> 00:15:26,720
Okay. Okay.

145
00:15:27,140 --> 00:15:31,730
So that's everything related to survival analysis.

146
00:15:32,460 --> 00:15:39,690
Um, so far, do we have any question? Okay.

147
00:15:39,800 --> 00:15:45,110
Good. Then why not move to another topic? Studies are longitudinal analysis.

148
00:15:46,040 --> 00:15:51,000
So now our of our outcome of interest is not longer.

149
00:15:51,020 --> 00:15:56,989
The probability of survival is going to be more or less very similar to what we do in five

150
00:15:56,990 --> 00:16:01,100
continuing fashion in what we have like a regression from normal regression analysis.

151
00:16:01,550 --> 00:16:06,740
The only difference is that I have multiple observations for the same individual, right?

152
00:16:07,100 --> 00:16:13,159
So for example, when I'm running a single leg regression model, I have one observation for each individual.

153
00:16:13,160 --> 00:16:20,960
So I have my observation, your observation, your observation. But in this case, I'm going to have multiple observations for one individual.

154
00:16:21,950 --> 00:16:25,460
So the information that we are going to use is, for example, this one.

155
00:16:25,820 --> 00:16:27,710
So let's work with this example.

156
00:16:27,800 --> 00:16:34,700
We want to investigate how much any drug helps in increasing the patient's blood pressure over time for a measurement.

157
00:16:34,850 --> 00:16:39,500
Measurements are for measurements are managed on each patient.

158
00:16:39,800 --> 00:16:47,840
I have baseline and then I have three subsequent measurements after taking the drug at an interval of one hour.

159
00:16:48,350 --> 00:16:52,130
So for each patient I have like the blood pressure and baseline.

160
00:16:52,520 --> 00:17:00,690
Then they got the drug and then one hour after they got the drug, I also I have the blood pressure, okay?

161
00:17:00,980 --> 00:17:04,510
And I have three measurements after the treatment cost effective.

162
00:17:05,300 --> 00:17:13,550
And then so that means that, for example, our outcome is going to have now to solving this.

163
00:17:13,880 --> 00:17:17,300
So I have y which normally represents the outcome.

164
00:17:17,720 --> 00:17:27,020
So in this case, this is going to be like blood pressure. And I have I j I means like individual subject and j the measurement.

165
00:17:27,500 --> 00:17:32,720
So, for example, in my case, let's say I'm one of the patients.

166
00:17:33,590 --> 00:17:40,790
So this is Daniela. I'm going to have like four observations for my outcome.

167
00:17:40,880 --> 00:17:47,900
So the baseline, I don't know, one, and then 2.2 and then 3.2 and then 2.8.

168
00:17:49,550 --> 00:17:53,330
So in this case, this is going to be y one.

169
00:17:53,360 --> 00:18:07,550
Let's have subject one, one, this is going to be one, y one, two, this is going to be 1y13 and this is going to be y14.

170
00:18:08,360 --> 00:18:16,250
So the first. So this means that it's the same subject in this case is my blood pressure.

171
00:18:16,610 --> 00:18:24,860
And then the second index is like the the occasion, you know, like the time measurements.

172
00:18:25,130 --> 00:18:31,640
So this is going to be baseline first, second and third after the treatment was conducted.

173
00:18:32,690 --> 00:18:44,420
Okay. So, for example, let's say I have 50 patients with hypertension, hypertension participating in the clinical trial.

174
00:18:44,810 --> 00:18:56,060
Then if I do y53, this means is the outcome for the fifth patient in the third measurement.

175
00:18:56,210 --> 00:19:04,180
Right. And the third measurement in this case is like the first one is baseline one hour after the treatment, 2 hours of treatment.

176
00:19:04,190 --> 00:19:11,030
So in this case is going to be the outcome of the blood pressure for the same thing to do well after 2 hours so that you can do treatment.

177
00:19:11,630 --> 00:19:16,550
And then y 51 it's going to be the outcome for the.

178
00:19:19,190 --> 00:19:22,790
For this object number 50. I'm at baseline.

179
00:19:23,150 --> 00:19:26,930
Correct. Does that make sense? Oh.

180
00:19:31,360 --> 00:19:39,010
Okay. Now, so for the rest of the lap, we are just going to talk about coding.

181
00:19:42,280 --> 00:19:48,640
This is going to be probably a lot of coding and a lot of like things to do honestly.

182
00:19:48,670 --> 00:19:52,900
At least for me, it took a while for me to master these concepts and.

183
00:19:54,340 --> 00:19:57,489
To the day. I still have to go google some things.

184
00:19:57,490 --> 00:20:01,660
Okay. So don't feel like pressure to like understand everything that is here.

185
00:20:02,170 --> 00:20:07,059
And most importantly, at least for me, these kind of things, I learn better.

186
00:20:07,060 --> 00:20:10,690
If I do it myself and I like I can check what I'm doing.

187
00:20:10,690 --> 00:20:15,580
I can check my code, I can check the data frames I am creating and then going back and forth.

188
00:20:16,030 --> 00:20:25,810
So that's my best advice. Just if you have time next week after the homework, when you have a little bit of free time, free time,

189
00:20:26,080 --> 00:20:33,370
just copy and paste according to your like own source or I script on like make sure you understand what is the outline for each of the codes.

190
00:20:34,270 --> 00:20:38,620
Okay. So give me that, let's say.

191
00:20:41,850 --> 00:20:45,430
So if. Any computer languages.

192
00:20:45,910 --> 00:20:52,690
I can store data frames into two different types, either wide or long.

193
00:20:53,530 --> 00:20:58,930
This is called a wide format and this is called a long format.

194
00:20:59,350 --> 00:21:04,690
So wide. So a wide format has one row for a subject.

195
00:21:05,050 --> 00:21:10,360
So, for example, for a subject, one on one, I have this sort of measurements, right?

196
00:21:10,630 --> 00:21:14,350
I have two for blood pressure or whatever information I have.

197
00:21:14,950 --> 00:21:18,210
And then for the other subject I also have like for measurements.

198
00:21:18,460 --> 00:21:24,640
And the measurements are stored as columns, columns in my dataframe, that's called white format.

199
00:21:25,120 --> 00:21:29,920
But I can also store the same information using a long form.

200
00:21:30,490 --> 00:21:34,870
So in a long format, I have multiple rows for a subject.

201
00:21:35,410 --> 00:21:39,730
So in this case I have four rows for subject 1 to 1.

202
00:21:40,090 --> 00:21:43,780
Right, because I have four measurements for that subject.

203
00:21:44,080 --> 00:21:48,550
So for each measurement, for each subject, I have a row.

204
00:21:48,940 --> 00:21:52,150
Does that make sense? This is called long format.

205
00:21:52,930 --> 00:21:58,300
It's very important that you kind of like know how to go back and forth between wide and long format.

206
00:21:58,690 --> 00:22:05,340
Because later on when we start using different statements, I might start to use.

207
00:22:05,380 --> 00:22:16,040
I do like actually the longitudinal analysis is some of the functions in our main requires the data to be long format and some other.

208
00:22:16,040 --> 00:22:19,780
It may require many requisite data to be in wide format.

209
00:22:20,020 --> 00:22:21,550
And the same applies for SAS.

210
00:22:21,760 --> 00:22:30,670
So there are some procedures, insights in which you have to have a long format or another ones in which you have to have a life form.

211
00:22:31,060 --> 00:22:35,110
So like it's very useful to learn how to like sleep come for between those two.

212
00:22:36,160 --> 00:22:44,380
Okay. So in general behaves like our data structure sign wide format.

213
00:22:44,560 --> 00:22:52,840
I have one robust subject and remember that our notation for the outcomes is that I have my outcome.

214
00:22:53,230 --> 00:22:57,580
Y. I. J. I is this subject.

215
00:22:59,710 --> 00:23:04,900
I'm why is and j is the measurement or the time, right?

216
00:23:06,720 --> 00:23:10,560
So in that wide format, it looks something like this.

217
00:23:10,710 --> 00:23:17,870
So if I have subject one and I have four measurements, this is going to be why one one?

218
00:23:18,390 --> 00:23:24,900
Because this is the first object and the first week. And then this one is going to be why?

219
00:23:25,170 --> 00:23:25,950
One, two?

220
00:23:26,340 --> 00:23:34,950
Because it's the first subject, but the second week and so on and so forth until for example, if I go to subject two and then I have this one,

221
00:23:35,310 --> 00:23:38,580
this means is the outcome is the value of the outcome,

222
00:23:38,580 --> 00:23:44,100
is the value of the blood pressure that I took for the second individual at the fourth measurement.

223
00:23:44,550 --> 00:23:53,960
Okay. Does that make sense? And then I want to switch between white for my long format and then switch back and forth.

224
00:23:55,370 --> 00:24:01,550
Okay. Why is this important? I already told you is basically because it is because of SAS on arm.

225
00:24:01,910 --> 00:24:09,350
So some of the statements that we are going to use in SAS request either SAS either long or wide.

226
00:24:09,650 --> 00:24:11,150
And the same applies for R.

227
00:24:11,360 --> 00:24:18,350
So it's like it's very useful for you to know how to switch back and forth to like actually be able to run those, those statements.

228
00:24:19,640 --> 00:24:32,530
Okay. So we are going to first talk about how to do it in SAS on there in our first of all, how to move from wide to long in size.

229
00:24:32,870 --> 00:24:43,010
So wide is one Roper's subject. And I want to change up to like a long format in which I have one row very subject for measurement.

230
00:24:43,940 --> 00:24:51,290
Okay, so there are two ways I can do it is I can use proc transpose or I can like kind of manually do it.

231
00:24:52,070 --> 00:24:56,180
So the first way using proc transpose.

232
00:24:57,740 --> 00:25:02,930
So for the rest of the lab, we are going to use the following notation.

233
00:25:03,290 --> 00:25:13,910
So assume we have a data set from a randomized clinical trial of the effect of two treatments on brief psycho psychiatric rating scale.

234
00:25:14,120 --> 00:25:18,080
So that's my outcome for 40 male subjects.

235
00:25:18,290 --> 00:25:28,010
So I have four individuals in my data set, and then I measured the BPR, which is my outcome, right?

236
00:25:28,370 --> 00:25:38,000
And all of them, they were assigned to either one or the other treatment and then the outcomes.

237
00:25:38,120 --> 00:25:44,870
So I measure my outcome before treatment and then for any consecutive weeks post-treatment.

238
00:25:45,200 --> 00:25:49,550
So for each individual I have nine yes.

239
00:25:49,850 --> 00:25:55,640
Nine outcomes, right. The baseline outcome and then eight after the treatment is started.

240
00:25:56,510 --> 00:26:02,870
And then that is just an f y in the data set which is already uploaded into combat.

241
00:26:03,050 --> 00:26:05,360
We don't have meeting values or anything weird.

242
00:26:05,600 --> 00:26:12,210
However, if you have like a dataset with missing values, everything we are going to do today, it still applies.

243
00:26:12,230 --> 00:26:15,980
You can use exactly the same methods. All right.

244
00:26:16,340 --> 00:26:24,350
So how to change from while to long? So my dataset, if you open the dataset like everybody else, I would look something like this.

245
00:26:25,610 --> 00:26:29,690
So I have a variable X, which is my treatment indicator.

246
00:26:30,050 --> 00:26:37,460
So this is one or zero in this case. I'm just going to let you know, I just did a screenshot of the first couple of them.

247
00:26:37,940 --> 00:26:41,360
The second one is the ID. Remember that I have 40 patients.

248
00:26:41,720 --> 00:26:45,080
And then after that I just have all of my measurements.

249
00:26:45,320 --> 00:26:53,880
So this week zero represents baseline and week one to age group and all of the other measurements I did after the treatment I started.

250
00:26:54,350 --> 00:26:59,809
Okay. So this is white for my right now, my data.

251
00:26:59,810 --> 00:27:05,060
It's in right format. And our objective is to change this into long form.

252
00:27:05,690 --> 00:27:09,740
Okay. So the first thing I'm going to do is just I'm going to, like, create my dataset.

253
00:27:10,790 --> 00:27:15,450
So create your dataset the way you have been doing it so far.

254
00:27:16,490 --> 00:27:20,700
So Data, I'll give it a name, input, all of the name of the variables.

255
00:27:20,700 --> 00:27:29,450
So my first one is 16 ID then week zero two, week eight, which are all of those columns and then copy paste all of the lines run and that's it.

256
00:27:29,990 --> 00:27:33,980
And then here I'm just like using from a frame to actually visualize the table.

257
00:27:34,340 --> 00:27:43,760
So the first thing I did was just like printing my dataset. Now what I want again is change this thing to a long format.

258
00:27:44,360 --> 00:27:48,460
Okay, so there are two ways to do this. The first two ways to do it.

259
00:27:48,470 --> 00:27:52,370
The first way is using something that is called proc transpose.

260
00:27:52,790 --> 00:27:55,920
So I'm broke transpose. I have to do two steps.

261
00:27:56,330 --> 00:28:00,200
The first step is to source the data. That's very important.

262
00:28:00,290 --> 00:28:05,299
Liesel We sorted data in sets. You don't have to do anything in sets.

263
00:28:05,300 --> 00:28:13,220
So your data, I'm going to sort for all of the variables that are not the measurement variables.

264
00:28:13,580 --> 00:28:22,150
So if I go to my data set, I'm going to search for all of the variables that are not like the outcomes.

265
00:28:22,460 --> 00:28:25,040
So in this case I only have like three main groups.

266
00:28:25,100 --> 00:28:32,440
I like the but I can have, for example, also age or I don't know, something all like any of it conveyed.

267
00:28:32,960 --> 00:28:36,100
Okay. So I'm just going to survive.

268
00:28:36,430 --> 00:28:43,430
But the hardest thing, just sort by that thing. And then the second step is using, like, different principles.

269
00:28:43,960 --> 00:28:49,390
So how does that one suppose works? So first as follows I have my data.

270
00:28:49,510 --> 00:28:57,250
This data is in wide format. And then I'm going to create a new data set that is going to be in long form.

271
00:28:57,760 --> 00:29:01,810
The name for my new dataset is going to be BP.

272
00:29:01,840 --> 00:29:08,830
RS underscore the one which is like, you know, like transpose one or like long form in my case.

273
00:29:09,190 --> 00:29:13,210
So this first part is just like naming the output of my dataset.

274
00:29:13,690 --> 00:29:20,200
And then what I'm going to do is I'm going to do a five and a bar statement in BI.

275
00:29:20,740 --> 00:29:26,440
So I'm going to choose all of the variables that are not my measure of violence.

276
00:29:26,710 --> 00:29:31,840
So, for example, in this case, only treatment. And so I'm going to buy those.

277
00:29:32,440 --> 00:29:42,550
And then under the VAR here, it's it means all of the variables are going to be transposed.

278
00:29:42,820 --> 00:29:50,590
So transpose what I'm doing is that instead of having these US columns, I'm going to have them as rows.

279
00:29:51,100 --> 00:29:56,850
That's what it means. So these variables are the ones that like, I'm going to transform it.

280
00:29:56,860 --> 00:30:04,440
I'm going to change it. Like if I. So instead of having them as pawns and we're going to have them as rows.

281
00:30:05,190 --> 00:30:10,739
So what by all of the variables that have measurement variables and then that's it, right?

282
00:30:10,740 --> 00:30:14,580
And that's it. Your data is not going to look something like this.

283
00:30:15,000 --> 00:30:21,510
So for each of the possible like combination between specs and I.D., why only those?

284
00:30:21,810 --> 00:30:30,090
Because those are the ones I have. Here is when I create our row for each of the variables that you have here.

285
00:30:30,750 --> 00:30:42,720
And that's what I was doing. And those are coming from way too long in SAS using press transpose so to use from transpose

286
00:30:42,810 --> 00:30:50,160
first thing sort and then proc transpose in source first sort on the broke transport.

287
00:30:50,670 --> 00:30:54,070
Any questions so far? Good.

288
00:30:56,990 --> 00:31:00,740
Okay. After Dad. As you like.

289
00:31:00,740 --> 00:31:07,430
The output of the Professor Bose is going to look something like this is going to look like this.

290
00:31:07,880 --> 00:31:12,290
So the only problem that I have with this dataset is the names of the columns.

291
00:31:12,440 --> 00:31:16,490
You know, these are just like random names that says create.

292
00:31:16,760 --> 00:31:20,840
So what I'm going to do is just change the names of the columns here.

293
00:31:21,260 --> 00:31:25,280
So this is the same kind of like code that we review.

294
00:31:25,580 --> 00:31:29,450
I have a steal my buy statement on my bar statement.

295
00:31:29,780 --> 00:31:36,440
The only difference here is that I'm using rename to change the name of that column.

296
00:31:37,510 --> 00:31:47,590
So I'm using rename to change this call one into BPR s and then to change this thing into a week.

297
00:31:48,400 --> 00:31:57,800
And then that's it. If I lose my output is going to be a long format table, but with proper names in the columns.

298
00:31:58,430 --> 00:32:04,820
Does that make sense? Okay. There is another way.

299
00:32:06,770 --> 00:32:11,390
There's another way of life. How to change from white to long hidden source.

300
00:32:11,690 --> 00:32:19,250
However, because we don't have much time, I want to show you how to do it in art as well, because there's maybe people who are using art right now.

301
00:32:19,850 --> 00:32:24,200
From what I see this part. However, like if you have questions, you're going to always email me.

302
00:32:33,140 --> 00:32:36,780
In art. How do I go from wide to long?

303
00:32:37,040 --> 00:32:40,790
We are writing three different ways you can do it.

304
00:32:40,820 --> 00:32:46,700
You can use three functions. Gather from be tidy to type.

305
00:32:46,880 --> 00:32:58,310
Why are package mail from r e shape to package and then also reset reshape from that same package.

306
00:32:58,520 --> 00:33:05,870
You can use either of them. I would. My best advice is just like, try whatever I like.

307
00:33:05,990 --> 00:33:09,330
You think it's, like, easier to understand and then just, like, use it for.

308
00:33:09,650 --> 00:33:13,520
That's why I don't try to learn the three things. Because, like, why?

309
00:33:13,880 --> 00:33:21,860
Just like a stick to one, and that's it. So the first thing I'm going to do is just read my wide format table, which I have here.

310
00:33:22,670 --> 00:33:27,410
I'm going to read it as I read the table because that's how I got the file.

311
00:33:28,130 --> 00:33:34,670
So read this. Part of the code is used like reading the table, you know, reading my TFC file.

312
00:33:35,420 --> 00:33:39,770
And then here I'm just going to change the, the name of the columns.

313
00:33:40,940 --> 00:33:44,360
So I want the names to be as I have there.

314
00:33:44,360 --> 00:33:48,020
So the phrase is going to be tags, then my idea for the subject.

315
00:33:48,410 --> 00:33:52,070
Then from one from week zero two, week eight.

316
00:33:52,280 --> 00:33:59,900
So that's why I just like naming all of my clip of all of my columns and then, okay.

317
00:34:00,320 --> 00:34:06,170
So using the first function, the gather function, how do I go from white to Latin?

318
00:34:06,710 --> 00:34:15,380
So in our first stages, if you don't have the package, make sure you install the package and then do library that package.

319
00:34:15,950 --> 00:34:25,399
Okay, let's assume we have them. So I'm going to use my gather function and I'm going to save my function into a new data set

320
00:34:25,400 --> 00:34:31,070
that is going to call that is going to be named BPR as long so that the name of my new dataset.

321
00:34:31,850 --> 00:34:37,070
Okay. So now using my governance function, I have to pass for Parliament.

322
00:34:37,610 --> 00:34:42,920
The first time is the data side in the wide format.

323
00:34:43,190 --> 00:34:47,000
So that's why I have here BPR, as is my data set in the white form.

324
00:34:47,570 --> 00:34:50,750
The second parameter are the names.

325
00:34:53,960 --> 00:35:02,780
So the way I understand this function is that so at the again, I want to create this table, right?

326
00:35:03,770 --> 00:35:08,730
So to create this table, I have to create two new columns because these columns.

327
00:35:08,960 --> 00:35:12,350
Where do you have them? Right. I already have a fixed column on the column.

328
00:35:12,620 --> 00:35:16,970
What I don't have is a week and a VP or a column.

329
00:35:17,420 --> 00:35:23,180
So I need to like tell our what I want to be those names of the two new columns I'm going to create.

330
00:35:23,540 --> 00:35:28,150
And that's what I have here. It's just like naming those unicorns.

331
00:35:28,480 --> 00:35:33,670
So one is going to be an MP and the other one is going to be b, r s and that's what I have here.

332
00:35:33,970 --> 00:35:38,150
So one is going to be named the week and then the other one is going to be b, b, r, x.

333
00:35:38,650 --> 00:35:47,860
Right. And now how am I going to like fill those two columns is like it's going to transpose those variables.

334
00:35:48,520 --> 00:35:52,600
So he's going to transpose this thing.

335
00:35:55,090 --> 00:35:59,860
So that's why here I'm forcing the names of the variables I want to transpose.

336
00:36:00,610 --> 00:36:04,780
Does that make sense? A little. Kind of.

337
00:36:05,950 --> 00:36:09,630
Yes. Our key and value are those just like the.

338
00:36:11,970 --> 00:36:15,330
The parts of the functions are that we just need to, like, fill in. Like those are like.

339
00:36:15,660 --> 00:36:25,590
Yes. Mm hmm. You kind of. I mean, you always the function is not going to run if you forget any of these four parameters.

340
00:36:26,010 --> 00:36:30,569
So the first one is just like the first name. We can be anything.

341
00:36:30,570 --> 00:36:33,629
I just chose that name week. But we can be anything.

342
00:36:33,630 --> 00:36:35,220
It can get on the end of our example.

343
00:36:35,490 --> 00:36:42,480
This is also just the name doesn't change much, but it's important to pass her name because otherwise it's not going to create a column.

344
00:36:42,780 --> 00:36:50,700
And then this one, the last one is just the weight, the columns in the white form, but I'm going to transpose to create the long form.

345
00:36:51,090 --> 00:36:55,300
So this is actually very important like. In his.

346
00:36:58,050 --> 00:37:01,380
Okay. So that's one way to do it.

347
00:37:02,280 --> 00:37:11,910
So that's moving from wide to long. Again, there are other functions and this presentation has all of the other functions.

348
00:37:12,240 --> 00:37:18,720
But for the sake of time, I'm going to move to Source two now, like teach how we move from long to wide.

349
00:37:18,810 --> 00:37:24,500
Okay. Just for the sake of time. But if you have questions, just remember you can always ask me.

350
00:37:30,650 --> 00:37:37,300
Okay. So now. Let's say I want to transform the data from long to wide.

351
00:37:37,600 --> 00:37:44,020
So I have the opposite problem now. I have a huge table, and then I want to change it to like a table.

352
00:37:44,020 --> 00:37:47,950
But instead of having a lot of rows is it has a lot of columns.

353
00:37:48,130 --> 00:37:55,690
So that's my purpose here. There are two ways to do it, which are the exact same ways that we discussed before.

354
00:37:55,710 --> 00:38:00,370
King size you can use from transpose or manually change the data.

355
00:38:00,700 --> 00:38:06,760
I'm going to teach proc transpose, but then again you can like review the material for the other one.

356
00:38:07,300 --> 00:38:16,810
So from preference files, remember I have these tables, I have the long table and now I want to produce white table.

357
00:38:17,260 --> 00:38:20,400
So first of all, my long table is this is in it.

358
00:38:20,680 --> 00:38:30,890
Okay so when I use transpose notice that here if I'm, if I'm moving from long to white, I don't have to sort first.

359
00:38:31,210 --> 00:38:35,950
That's important. But if I'm doing y too long, I do have to sort the first.

360
00:38:37,090 --> 00:38:46,960
So in this case prop transpose my data is my long format table and then I'm just going to use do the same thing.

361
00:38:47,260 --> 00:38:54,550
So out is just the name of the new table I'm creating in this case, that's the name I decided to call my new white table.

362
00:38:55,690 --> 00:39:04,240
And then why? So why are the columns that I still want to have in my life long format?

363
00:39:04,510 --> 00:39:14,590
So in this case, that's I.B. and X, and I'd never notice that the names are very similar to the other properties files.

364
00:39:15,160 --> 00:39:18,670
So I b I'm var r like.

365
00:39:20,710 --> 00:39:23,110
All right, so maybe this is easier.

366
00:39:27,210 --> 00:39:38,370
So in the long format I have four problems right when I'm trying to white for my I have to tell us what to do which each of with each of the columns.

367
00:39:38,400 --> 00:39:46,590
Okay. So if you notice, these are two of the things that we have in common is that they both have the XIV and the XIV.

368
00:39:47,220 --> 00:39:52,770
Okay. So if they both have their in column in common and I don't want to change that,

369
00:39:53,190 --> 00:39:58,140
that should be here in the bias statement, because it should also be part of the white form.

370
00:39:59,290 --> 00:40:04,300
So that means that I already know what to do with this and with this column.

371
00:40:04,360 --> 00:40:07,360
The question is, now, what do I do with these last two columns?

372
00:40:07,870 --> 00:40:14,470
So here I have a week and then I have also my outcome, like the value of the outcome in that week.

373
00:40:15,280 --> 00:40:25,150
So what I'm going to do is what I'm going to do is for each of the possible values in week three, that means I'll be week.

374
00:40:25,600 --> 00:40:30,100
So for each of the possible value, seem week, create a new column.

375
00:40:30,370 --> 00:40:37,010
That's what I'm doing here with these idea for each of the possible values each week, create a new column.

376
00:40:37,090 --> 00:40:43,240
So in this case, he's going to create a new columns, actually nine from week zero, week eight.

377
00:40:43,660 --> 00:40:55,150
Right. And then how do I how am I going to fill those new columns using these variable, which is my last column in the long format?

378
00:40:56,840 --> 00:41:03,450
Does that make sense? It doesn't make sense.

379
00:41:03,960 --> 00:41:11,100
And then I already use the so one way to like make sure I'm making like I'm trying to use things correctly

380
00:41:11,400 --> 00:41:18,150
is making sure I like till I call it tells us what to do with all of the columns in the long format.

381
00:41:18,510 --> 00:41:21,750
So I already know these. Do I still want them in the right format?

382
00:41:22,200 --> 00:41:26,010
This is going to create for each of the possible values one column.

383
00:41:26,310 --> 00:41:31,980
And that is going to field those values is when I fill those new calls using these values.

384
00:41:32,550 --> 00:41:38,260
Does that make sense? And that's it. That's using pro transpose, but in the other way.

385
00:41:39,100 --> 00:41:43,140
Any questions so far? Okay.

386
00:41:44,100 --> 00:41:49,050
Now, for the sake of time, there's another way to do it. But given the.

387
00:41:51,370 --> 00:41:59,570
Given the timing, I'm going to move to our. So we are from London, right?

388
00:42:00,140 --> 00:42:11,220
There are two possible. Functions are functions that we can use either to spread or reshape again.

389
00:42:11,310 --> 00:42:16,320
Both of them are in. This is my. The one that you'd like best.

390
00:42:16,320 --> 00:42:20,040
And just, like, distinguish it. So we spread.

391
00:42:20,820 --> 00:42:30,830
It works very similarly. So it's first of all, it's in the tidy, tidy wire package.

392
00:42:30,840 --> 00:42:33,990
So make sure you install on the package before you do it.

393
00:42:34,980 --> 00:42:41,850
This is the name of my output dataset. So this is the name of the new wider dataset that I'm going to create.

394
00:42:42,180 --> 00:42:50,910
And I'm using the spread function to create that view that the data set in the long format is BPR as long.

395
00:42:51,450 --> 00:43:01,580
So here I have to pass three barometers. The first parameter is my data in the long format.

396
00:43:03,230 --> 00:43:12,350
So that's BPR as long, that's E. And then the second barometer is going to tell you how many columns I'm going to create.

397
00:43:12,860 --> 00:43:17,810
How am I going to fill those columns? So week.

398
00:43:18,990 --> 00:43:30,000
These key equal wake is telling. Ah, so you have this fable, you have this fable for each of these possible levels in this week,

399
00:43:30,240 --> 00:43:34,980
which is the key for each of the possible levels, you will create a new column.

400
00:43:35,370 --> 00:43:41,610
So that's one phase means. And then the question is, okay, so I created a new column.

401
00:43:42,210 --> 00:43:46,380
It needs values. How do I feel them? And then that's the values here.

402
00:43:46,710 --> 00:43:51,330
So fill it with the other column that you have here, the press.

403
00:43:51,870 --> 00:44:01,050
And then by default, any of the columns that you haven't like used are going to like still stay in the white format.

404
00:44:01,620 --> 00:44:06,479
So that's like a little bit of a difference between size on our swing size.

405
00:44:06,480 --> 00:44:13,890
You have to do like by index to make sure you also have those variables in the white format here.

406
00:44:13,900 --> 00:44:20,820
You don't have to do it by default. I'm going to save those columns and like create them or like minus them into the white form.

407
00:44:21,660 --> 00:44:24,730
Does that make sense? And that's it.

408
00:44:25,030 --> 00:44:30,250
There's another way to do it. But again, I think it's almost time.

409
00:44:31,360 --> 00:44:39,700
So I'm just going to leave it there. If you have questions, my best advice is just please try it yourself to make sure you understand,

410
00:44:39,700 --> 00:44:43,330
like how to move from wide to long of what all of these functions are doing.

411
00:44:44,530 --> 00:44:48,760
All of the code for the different ways to do it are in these slides.

412
00:44:49,060 --> 00:44:54,550
But if you have questions like please post on our please send me an email on my answer at any time.

413
00:44:55,120 --> 00:44:59,860
All right. And that's it. There's nothing else to discuss today.

